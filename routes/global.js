import { getGlobalInfo } from '../controllers/globalController.js';
import { Router } from 'express';
const router = Router();

/**
 * @swagger
 * /global/global:
 *   get:
 *     summary: Obtener info global
 *     description: Este método hace ping a la API de CoinGecko y devuelve información global del mercado.
 *     responses:
 *       200:
 *         description: Respuesta exitosa con datos globales del mercado.
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 message:
 *                   type: object
 *                   example: {
 *                     "data": {
 *                       "active_cryptocurrencies": 18782,
 *                       "upcoming_icos": 0,
 *                       "ongoing_icos": 49,
 *                       "ended_icos": 3376,
 *                       "markets": 1373,
 *                       "total_market_cap": {
 *                         "btc": 35584830.30085068,
 *                         "eth": 911796381.1448888,
 *                         "ltc": 35919302010.92976,
 *                         "bch": 6948535425.06482,
 *                         "bnb": 4423582300.115987,
 *                         "eos": 8723218220661.687,
 *                         "xrp": 1351584289355.9185,
 *                         "xlm": 10548060398977.209,
 *                         "link": 174342547164.31403,
 *                         "dot": 974046779008.0311,
 *                         "yfi": 760980001.6425043,
 *                         "sol": 17472685970.05409,
 *                         "usd": 4109219012512.3203,
 *                         "aed": 15091106823451.504,
 *                         "ars": 6.018079862379388e+15,
 *                         "aud": 6160758932166.138,
 *                         "bdt": 500542266697454.6,
 *                         "bhd": 1549138584746.0334,
 *                         "bmd": 4109219012512.3203,
 *                         "brl": 21844608270515.51,
 *                         "cad": 5652181441082.551,
 *                         "chf": 3248744442073.2305,
 *                         "clp": 3904210075978083.5,
 *                         "cny": 29239558805432.688,
 *                         "czk": 84629776484592.53,
 *                         "dkk": 25977475838444.84,
 *                         "eur": 3479867465431.986,
 *                         "gbp": 3012213686494.0083,
 *                         "gel": 11094891333783.273,
 *                         "hkd": 31979996964877.152,
 *                         "huf": 1355978626435781.8,
 *                         "idr": 6.745867074116086e+16,
 *                         "ils": 13736009669695.318,
 *                         "inr": 361863998288791.75,
 *                         "jpy": 604342093031986.4,
 *                         "krw": 5.683094162920961e+15,
 *                         "kwd": 1253887089478.0103,
 *                         "lkr": 1.241251627281122e+15,
 *                         "mmk": 8.627305316769621e+15,
 *                         "mxn": 75320057275634.02,
 *                         "myr": 17285429776133.086,
 *                         "ngn": 6.140981261058917e+15,
 *                         "nok": 40313493122252.14,
 *                         "nzd": 6877723137812.25,
 *                         "php": 234065236499371.47,
 *                         "pkr": 1166533899328341.8,
 *                         "pln": 14790990012872.666,
 *                         "rub": 340263473518400.7,
 *                         "sar": 15414379083165.854,
 *                         "sek": 38042081220895.81,
 *                         "sgd": 5252699605562.153,
 *                         "thb": 130379355438497.25,
 *                         "try": 169652805228682.5,
 *                         "twd": 123899536196104.6,
 *                         "uah": 169183700895433.12,
 *                         "vef": 411456099722.8587,
 *                         "vnd": 1.0839406521972722e+17,
 *                         "zar": 71400306133350.6,
 *                         "xdr": 2857119433304.7554,
 *                         "xag": 96155272878.69699,
 *                         "xau": 1114584564.9538424,
 *                         "bits": 35584830300850.68,
 *                         "sats": 3.558483030085068e+15
 *                       },
 *                       "total_volume": {
 *                         "btc": 1145719.8680530288,
 *                         "eth": 29356982.193380803,
 *                         "ltc": 1156488807.5224442,
 *                         "bch": 223721035.70708182,
 *                         "bnb": 142425468.55954635,
 *                         "eos": 280860252649.15656,
 *                         "xrp": 43516772753.20295,
 *                         "xlm": 339614444311.1941,
 *                         "link": 5613282919.838786,
 *                         "dot": 31361249658.562534,
 *                         "yfi": 24501168.045530938,
 *                         "sol": 562565657.7506235,
 *                         "usd": 132303957192.23268,
 *                         "aed": 485886282788.4748,
 *                         "ars": 193763286421884.97,
 *                         "aud": 198357104732.32654,
 *                         "bdt": 16115890251747.588,
 *                         "bhd": 49877401125.85703,
 *                         "bmd": 132303957192.23268,
 *                         "brl": 703327836433.9094,
 *                         "cad": 181982505470.4299,
 *                         "chf": 104599376252.22205,
 *                         "clp": 125703312767912.28,
 *                         "cny": 941422037797.0515,
 *                         "czk": 2724813228769.7524,
 *                         "dkk": 836393202899.7834,
 *                         "eur": 112040812324.49918,
 *                         "gbp": 96983828172.27992,
 *                         "gel": 357220684419.0285,
 *                         "hkd": 1029655546848.5515,
 *                         "huf": 43658256617443.86,
 *                         "idr": 2171957507936967.8,
 *                         "ils": 442256406825.19226,
 *                         "inr": 11650885190891.713,
 *                         "jpy": 19457918928756.17,
 *                         "krw": 182977798107388.66,
 *                         "kwd": 40371229497.63791,
 *                         "lkr": 39964407265843.766,
 *                         "mmk": 277772158125092.66,
 *                         "mxn": 2425069484777.703,
 *                         "myr": 556536595929.1271,
 *                         "ngn": 197720325786360.34,
 *                         "nok": 1297967972034.3994,
 *                         "nzd": 221441102271.35574,
 *                         "php": 7536166102538.643,
 *                         "pkr": 37558730895111.29,
 *                         "pln": 476223463274.94006,
 *                         "rub": 10955416077211.072,
 *                         "sar": 496294635100.78784,
 *                         "sek": 1224835636656.8203,
 *                         "sgd": 169120443968.0298,
 *                         "thb": 4197806105773.758,
 *                         "try": 5462287946242.803,
 *                         "twd": 3989176260285.24,
 *                         "uah": 5447184258793.694,
 *                         "vef": 13247595233.65826,
 *                         "vnd": 3489948752075640.5,
 *                         "zar": 2298865798443.69,
 *                         "xdr": 91990279915.97348,
 *                         "xag": 3095898044.8629556,
 *                         "xau": 35886125.348821215,
 *                         "bits": 1145719868053.0288,
 *                         "sats": 114571986805302.88
 *                       },
 *                       "market_cap_percentage": {
 *                         "btc": 55.98362054972853,
 *                         "eth": 13.227618459642649,
 *                         "xrp": 4.417235787232658,
 *                         "usdt": 4.144429075288793,
 *                         "bnb": 3.145818939094322,
 *                         "sol": 3.105903729495654,
 *                         "usdc": 1.7794468131583343,
 *                         "doge": 0.9776981293714148,
 *                         "steth": 0.9422911727266922,
 *                         "trx": 0.7969099504045911
 *                       },
 *                       "market_cap_change_percentage_24h_usd": 0.4900938377172713,
 *                       "updated_at": 1758028152
 *                     }
 *                   }
 */
router.get('/global', async (req, res) => {
    const data = await getGlobalInfo();
    res.json({message: data});
})

export default router;